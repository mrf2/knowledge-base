# 400 - Bad request

`400 Bad Request` is an HTTP **client-error status code**.

It means:
> I (the server) received your request, but it's malformed or invalid in a way I can't process.

**Precise meaning (RFC-level):** From **RFC 9110 (HTTP semantics)**, the server **cannot or will not process** the request due to a **client error** (e.g. malformed request syntax, invalid request message framing, or deceptive request routing).

So:
 * The request **reached** thee server ✔
 * The server **parsed enough** to know it's broken ✔
 * The server **rejects it before application logic** ❌

## Where it happens in the request pipeline
Using mental model:
```bash
client
    ↓
TCP/TLS
    ↓
HTTP parser ←── 400 usually happens HERE
    ↓
framework/router
    ↓
handler/controller
    ↓
   DB
```
**400 happens before routing and before our handler is called.**

If our handler runs → it's **not** a 400.

## Common real causes

### 1. Invalid HTTP syntax
Examples:
 * Missing request line parts
 * Invalid header formatting
 * Illegal characters in headers
```http
GET /path HTTP/1.1
Host example.com          ← missing colon
```

### 2. Malformed headers
Example:
 * Duplicate `Content-Length`
 * Invalid `Host`
 * Invalid `Transfer-Encoding`
```http
Content-Length: 10
Content-Length: 20          ← illegal
```

### 3. Invalid request body (declared vs actual)
Common in APIs:
```http
Content-Type: application/json
```
But body is:
```
name=user&age=54
```
Server expects JSON → parser rejects → **400**

### 4. Invalid URL/query string
Examples:
 * Bad percent-encoding
 * Control characters
```http
GET /search?q=%ZZ HTTP/1.1
```

### 5. Request size violations
 * Headers too large
 * Body too large (sometimes 413 instead, depends on server)

### 6. Framework-level validation failures
Some frameworks map validation errors to **400**:
```json
{
    "email": "not-an-email"
}
```
Schema validation fails → **400**
(This is post-parse, but still client fault.)


## Practical debugging (curl-centric)
When we see **400**:
 1. **Raw request (`curl -v`)
 2. **Headers correctness**
 3. **Content-Type vs body
 4. **JSON validity**
 5. **URL encoding**
 6. **Framework validation rules**

## Path + method OK, bad data

Example:
```bash
curl -v \
  -H "Content-Type: application/json" \
  -d '{"name":}' \
  https://api.example.com/user
```
→ `400 Bad Request`
(because invalid JSON)
